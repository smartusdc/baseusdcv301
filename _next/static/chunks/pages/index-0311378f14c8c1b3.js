(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9564)}])},9564:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n(85893),i=n(67294),s=n(69077),r=n(15229),l=n(63819);let d=[{inputs:[{internalType:"address",name:"_usdcTokenAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newAPR",type:"uint256"}],name:"APRUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"bool",name:"frozen",type:"bool"}],name:"AccountFrozen",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"functionType",type:"string"},{indexed:!1,internalType:"bool",name:"isPaused",type:"bool"}],name:"PauseStatusChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"referralCode",type:"uint256"}],name:"ReferralCodeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"referrer",type:"address"},{indexed:!1,internalType:"uint256",name:"referralCode",type:"uint256"}],name:"ReferralProcessed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ReferralRewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"referrerRate",type:"uint256"},{indexed:!1,internalType:"uint256",name:"referredRate",type:"uint256"}],name:"ReferralRewardRateUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawal",type:"event"},{inputs:[],name:"MIN_DEPOSIT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDC_DECIMALS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDC_PRECISION",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"calculateReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimDepositReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currentAPR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"referralCode",type:"uint256"}],name:"depositFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"generateReferralCode",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getBalanceSummary",outputs:[{internalType:"uint256",name:"contractBalance",type:"uint256"},{internalType:"uint256",name:"totalDepositAmount",type:"uint256"},{internalType:"uint256",name:"totalRewardAmount",type:"uint256"},{internalType:"uint256",name:"totalReferralAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserInfo",outputs:[{internalType:"uint256",name:"depositAmount",type:"uint256"},{internalType:"uint256",name:"pendingRewards",type:"uint256"},{internalType:"uint256",name:"userReferralRewards",type:"uint256"},{internalType:"uint256",name:"totalReferrals",type:"uint256"},{internalType:"bool",name:"isFrozen",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isDepositPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isRewardClaimPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isWithdrawalPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"referralCode",type:"uint256"}],name:"processReferral",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"referralCodeToUser",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referredRewardRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrerRewardRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_newAPR",type:"uint256"}],name:"setAPR",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bool",name:"frozen",type:"bool"}],name:"setAccountFrozen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_referrerRate",type:"uint256"},{internalType:"uint256",name:"_referredRate",type:"uint256"}],name:"setReferralRewardRates",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"toggleDepositPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"toggleRewardClaimPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"toggleWithdrawalPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalDeposits",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalReferralRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdcToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userToReferralCode",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userToReferrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"users",outputs:[{internalType:"uint256",name:"depositAmount",type:"uint256"},{internalType:"uint256",name:"lastRewardTimestamp",type:"uint256"},{internalType:"uint256",name:"pendingRewards",type:"uint256"},{internalType:"uint256",name:"referralRewards",type:"uint256"},{internalType:"uint256",name:"totalReferrals",type:"uint256"},{internalType:"uint256",name:"accumulatedRewards",type:"uint256"},{internalType:"bool",name:"isFrozen",type:"bool"},{internalType:"bool",name:"hasReferrer",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],u=[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],o={USDC:{address:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",abi:u}},p="0x2Bd38bD63D66b360dE91E2F8CAEe48AA0B159a00",y="0.01";function m(){let{address:e}=(0,s.mA)(),{chain:t}=(0,s.LN)(),{switchNetwork:n}=(0,s.g0)(),[m,c]=(0,i.useState)(""),[b,f]=(0,i.useState)(""),[g,x]=(0,i.useState)(!1),[w,h]=(0,i.useState)(),{data:T,refetch:v}=(0,s.do)({address:p,abi:d,functionName:"users",args:[null!=e?e:"0x0000000000000000000000000000000000000000"],enabled:!!e}),{data:R}=(0,s.do)({address:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",abi:u,functionName:"allowance",args:e?[e,p]:void 0,enabled:!!e}),{config:N}=(0,s.PJ)({address:o.USDC.address,abi:o.USDC.abi,functionName:"approve",enabled:!!e&&!!m}),{writeAsync:j}=(0,s.GG)(N),{config:C}=(0,s.PJ)({address:p,abi:d,functionName:"depositFunds",enabled:!!e&&!!m}),{writeAsync:M}=(0,s.GG)(C),{config:A}=(0,s.PJ)({address:p,abi:d,functionName:"claimDepositReward",enabled:!!e}),{writeAsync:S}=(0,s.GG)(A),{config:D}=(0,s.PJ)({address:p,abi:d,functionName:"generateReferralCode",enabled:!!e}),{writeAsync:P}=(0,s.GG)(D),{config:k}=(0,s.PJ)({address:p,abi:d,functionName:"processReferral",args:void 0!==w?[BigInt(w)]:void 0,enabled:!!e&&void 0!==w}),{writeAsync:E}=(0,s.GG)(k);(0,i.useEffect)(()=>{t&&8453!==t.id&&(alert("Please switch to BASE Network"),null==n||n(8453))},[t,n]);let U=async()=>{if(e&&!g){if(!m||parseFloat(m)<parseFloat(y)){alert("Minimum stake amount is ".concat(y," USDC"));return}try{x(!0);let e=function(e,t){let[n,a="0"]=e.split("."),i=n.startsWith("-");if(i&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>t){let[e,i,s]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],r=Math.round(Number(`${i}.${s}`));(a=r>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${r}`).length>t&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${i?"-":""}${n}${a}`)}(m,6);if((!R||R<e)&&!await (null==j?void 0:j()))throw Error("Failed to approve");if(!await (null==M?void 0:M()))throw Error("Failed to stake");await v(),c(""),alert("Staking successful")}catch(e){console.error("Staking error:",e),alert((null==e?void 0:e.message)||"Failed to stake")}finally{x(!1)}}},_=async()=>{if(e&&!g)try{if(x(!0),!await (null==S?void 0:S()))throw Error("Failed to claim rewards");await v(),alert("Rewards claimed successfully")}catch(e){console.error("Claim error:",e),alert((null==e?void 0:e.message)||"Failed to claim rewards")}finally{x(!1)}},F=async()=>{if(e&&!g)try{if(x(!0),!await (null==P?void 0:P()))throw Error("Failed to generate referral code");await v(),alert("Referral code generated successfully")}catch(e){console.error("Generate referral code error:",e),alert((null==e?void 0:e.message)||"Failed to generate referral code")}finally{x(!1)}},I=async()=>{if(e&&!g&&b)try{if(x(!0),h(parseInt(b)),!await (null==E?void 0:E()))throw Error("Failed to process referral");await v(),f(""),alert("Referral code applied successfully")}catch(e){console.error("Apply referral error:",e),alert((null==e?void 0:e.message)||"Failed to apply referral code")}finally{x(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 py-8",children:[(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("header",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-blue-800",children:"BaseUSDC Staking"}),(0,a.jsx)(l.NL,{})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Stake USDC"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,a.jsxs)("div",{className:"relative rounded-lg shadow-sm",children:[(0,a.jsx)("input",{type:"number",value:m,onChange:e=>c(e.target.value),placeholder:"Min ".concat(y," USDC"),className:"w-full rounded-lg border-gray-300 pr-12 focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:g}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"USDC"})})]})]}),!(null==T?void 0:T.hasReferrer)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referral Code (Optional)"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:b,onChange:e=>f(e.target.value),placeholder:"Enter referral code",className:"flex-1 rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:g}),(0,a.jsx)("button",{onClick:I,disabled:g||!b,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 disabled:bg-gray-400 transition-colors",children:"Apply"})]})]}),(0,a.jsx)("button",{onClick:U,disabled:g||!e||(null==t?void 0:t.id)!==8453,className:"w-full bg-blue-600 text-white rounded-lg py-4 font-medium hover:bg-blue-700 disabled:bg-blue-400 transition-colors",children:g?"Processing...":"Stake USDC"})]}),T&&(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Your Stake"}),(0,a.jsxs)("p",{className:"text-lg font-semibold",children:[(0,r.b)(T.depositAmount,6)," USDC"]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Pending Rewards"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:[(0,r.b)(T.pendingRewards,6)," USDC"]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Available Rewards"}),(null==T?void 0:T.pendingRewards)>0n?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-6 bg-gradient-to-br from-green-50 to-blue-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Rewards Available"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[(0,r.b)(T.pendingRewards,6)," USDC"]})]}),(0,a.jsx)("button",{onClick:_,disabled:g,className:"w-full bg-green-600 text-white rounded-lg py-4 font-medium hover:bg-green-700 disabled:bg-green-400 transition-colors",children:g?"Processing...":"Claim Rewards"})]}):(0,a.jsx)("div",{className:"py-8 text-center text-gray-500",children:"No rewards available to claim"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Referral Program"}),(null==T?void 0:T.totalReferrals)?(0,a.jsxs)("div",{className:"p-6 bg-blue-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Your Referral Code"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-blue-600",children:T.totalReferrals.toString()}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-blue-100",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Referrals"}),(0,a.jsx)("span",{className:"font-semibold",children:T.totalReferrals.toString()})]})})]}):(0,a.jsx)("button",{onClick:F,disabled:g,className:"w-full bg-blue-600 text-white rounded-lg py-4 font-medium hover:bg-blue-700 disabled:bg-blue-400 transition-colors",children:g?"Generating...":"Generate Referral Code"})]})]})]}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-blue-500 border-t-transparent mx-auto"}),(0,a.jsx)("p",{className:"text-gray-700 mt-4",children:"Processing transaction..."})]})})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);