(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9564)}])},9564:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n(85893),i=n(67294),s=n(69077),r=n(15229),l=n(63819);let u=[{inputs:[{internalType:"address",name:"_usdcTokenAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newAPR",type:"uint256"}],name:"APRUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"bool",name:"frozen",type:"bool"}],name:"AccountFrozen",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"functionType",type:"string"},{indexed:!1,internalType:"bool",name:"isPaused",type:"bool"}],name:"PauseStatusChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"referralCode",type:"uint256"}],name:"ReferralCodeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"referrer",type:"address"},{indexed:!1,internalType:"uint256",name:"referralCode",type:"uint256"}],name:"ReferralProcessed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ReferralRewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"referrerRate",type:"uint256"},{indexed:!1,internalType:"uint256",name:"referredRate",type:"uint256"}],name:"ReferralRewardRateUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawal",type:"event"},{inputs:[],name:"MIN_DEPOSIT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDC_DECIMALS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDC_PRECISION",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"calculateReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimDepositReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currentAPR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"referralCode",type:"uint256"}],name:"depositFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"generateReferralCode",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getBalanceSummary",outputs:[{internalType:"uint256",name:"contractBalance",type:"uint256"},{internalType:"uint256",name:"totalDepositAmount",type:"uint256"},{internalType:"uint256",name:"totalRewardAmount",type:"uint256"},{internalType:"uint256",name:"totalReferralAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserInfo",outputs:[{internalType:"uint256",name:"depositAmount",type:"uint256"},{internalType:"uint256",name:"pendingRewards",type:"uint256"},{internalType:"uint256",name:"userReferralRewards",type:"uint256"},{internalType:"uint256",name:"totalReferrals",type:"uint256"},{internalType:"bool",name:"isFrozen",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isDepositPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isRewardClaimPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isWithdrawalPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"referralCode",type:"uint256"}],name:"processReferral",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"referralCodeToUser",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referredRewardRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrerRewardRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_newAPR",type:"uint256"}],name:"setAPR",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bool",name:"frozen",type:"bool"}],name:"setAccountFrozen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_referrerRate",type:"uint256"},{internalType:"uint256",name:"_referredRate",type:"uint256"}],name:"setReferralRewardRates",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"toggleDepositPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"toggleRewardClaimPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"toggleWithdrawalPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalDeposits",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalReferralRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdcToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userToReferralCode",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userToReferrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"users",outputs:[{internalType:"uint256",name:"depositAmount",type:"uint256"},{internalType:"uint256",name:"lastRewardTimestamp",type:"uint256"},{internalType:"uint256",name:"pendingRewards",type:"uint256"},{internalType:"uint256",name:"referralRewards",type:"uint256"},{internalType:"uint256",name:"totalReferrals",type:"uint256"},{internalType:"uint256",name:"accumulatedRewards",type:"uint256"},{internalType:"bool",name:"isFrozen",type:"bool"},{internalType:"bool",name:"hasReferrer",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],d=[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],p={USDC:{address:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",abi:d}},o="0x2Bd38bD63D66b360dE91E2F8CAEe48AA0B159a00",y="0.01";function m(){var e;let{address:t}=(0,s.mA)(),{chain:n}=(0,s.LN)(),{switchNetwork:m}=(0,s.g0)(),[c,f]=(0,i.useState)(""),[b,w]=(0,i.useState)(""),[x,T]=(0,i.useState)(!1),[h,g]=(0,i.useState)(),{data:v,refetch:R}=(0,s.do)({address:o,abi:u,functionName:"users",args:[null!=t?t:"0x0000000000000000000000000000000000000000"],enabled:!!t}),{data:N}=(0,s.do)({address:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",abi:d,functionName:"allowance",args:t?[t,o]:void 0,enabled:!!t}),{config:C}=(0,s.PJ)({address:p.USDC.address,abi:p.USDC.abi,functionName:"approve",enabled:!!t&&!!c}),{writeAsync:j}=(0,s.GG)(C),{config:M}=(0,s.PJ)({address:o,abi:u,functionName:"depositFunds",enabled:!!t&&!!c}),{writeAsync:S}=(0,s.GG)(M),{config:A}=(0,s.PJ)({address:o,abi:u,functionName:"claimDepositReward",enabled:!!t}),{writeAsync:D}=(0,s.GG)(A),{config:P}=(0,s.PJ)({address:o,abi:u,functionName:"generateReferralCode",enabled:!!t}),{writeAsync:k}=(0,s.GG)(P),{config:E}=(0,s.PJ)({address:o,abi:u,functionName:"processReferral",args:void 0!==h?[BigInt(h)]:void 0,enabled:!!t&&void 0!==h}),{writeAsync:U}=(0,s.GG)(E);(0,i.useEffect)(()=>{n&&8453!==n.id&&(alert("Please switch to BASE Network"),null==m||m(8453))},[n,m]);let _=async()=>{if(t&&!x){if(!c||parseFloat(c)<parseFloat(y)){alert("Minimum stake amount is ".concat(y," USDC"));return}try{T(!0);let e=function(e,t){let[n,a="0"]=e.split("."),i=n.startsWith("-");if(i&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>t){let[e,i,s]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],r=Math.round(Number(`${i}.${s}`));(a=r>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${r}`).length>t&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${i?"-":""}${n}${a}`)}(c,6);if(b&&parseInt(b),(!N||N<e)&&!await (null==j?void 0:j()))throw Error("Failed to approve");if(!await (null==S?void 0:S()))throw Error("Failed to stake");await R(),f(""),w(""),alert("Staking successful")}catch(t){console.error("Staking error:",t);let e="Transaction failed";t.message.includes("insufficient funds")?e="Insufficient USDC balance":t.message.includes("referral code")&&(e="Invalid referral code"),alert(e)}finally{T(!1)}}},I=async()=>{if(t&&!x&&b)try{T(!0);let e=parseInt(b);if(g(e),!await (null==U?void 0:U()))throw Error("Failed to process referral");await R(),w(""),alert("Referral code applied successfully")}catch(t){console.error("Apply referral error:",t);let e="Failed to apply referral code";t.message.includes("Already has referrer")?e="You already have a referrer":t.message.includes("Must have active deposit")&&(e="Please make a deposit first"),alert(e)}finally{T(!1)}},F=async()=>{if(t&&!x)try{if(T(!0),!await (null==D?void 0:D()))throw Error("Failed to claim rewards");await R(),alert("Rewards claimed successfully")}catch(e){console.error("Claim rewards error:",e),alert((null==e?void 0:e.message)||"Failed to claim rewards")}finally{T(!1)}},O=async()=>{if(t&&!x)try{if(T(!0),!await (null==k?void 0:k()))throw Error("Failed to generate referral code");await R(),alert("Referral code generated successfully")}catch(e){console.error("Generate referral code error:",e),alert((null==e?void 0:e.message)||"Failed to generate referral code")}finally{T(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsxs)("header",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"BaseUSDC"}),(0,a.jsx)(l.NL,{})]}),(0,a.jsxs)("main",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Stake USDC"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Amount"}),(0,a.jsx)("input",{type:"number",value:c,onChange:e=>f(e.target.value),placeholder:"Min ".concat(y," USDC"),className:"w-full rounded-md border p-2",disabled:x})]}),!(null==v?void 0:v[7])&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Referral Code (Optional)"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:b,onChange:e=>w(e.target.value),placeholder:"Enter referral code",className:"flex-1 rounded-md border p-2",disabled:x}),(0,a.jsx)("button",{onClick:I,disabled:x||!b,className:"px-4 py-2 bg-gray-600 text-white rounded-md disabled:bg-gray-400",children:"Apply Code"})]})]}),(0,a.jsx)("button",{onClick:_,disabled:x||!t||(null==n?void 0:n.id)!==8453,className:"w-full bg-blue-600 text-white rounded-md py-2 disabled:bg-gray-400",children:x?"Processing...":"Stake USDC"})]}),v&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{children:"Your Stake:"}),(0,a.jsxs)("span",{children:[(0,r.b)(v[0],6)," USDC"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Pending Rewards:"}),(0,a.jsxs)("span",{children:[(0,r.b)(v[2],6)," USDC"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Available Rewards"}),(null==v?void 0:v[2])>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-md mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Staking Rewards:"}),(0,a.jsxs)("p",{className:"text-lg font-medium",children:[(0,r.b)((null==v?void 0:v.pendingRewards)||0n,6)," USDC"]})]}),(0,a.jsx)("button",{onClick:F,disabled:x,className:"w-full bg-green-600 text-white rounded-md py-2 disabled:bg-gray-400",children:x?"Processing...":"Claim Staking Rewards"})]}),(!(null==v?void 0:v[2])||v[2]<=0)&&(!(null==v?void 0:v[3])||v[3]<=0)&&(0,a.jsx)("p",{className:"text-center text-gray-500",children:"No rewards available to claim"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Referral Program"}),(null==v?void 0:v[4])?(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Your Referral Code:"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:v[4].toString()})]}):(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:O,disabled:x,className:"w-full bg-blue-600 text-white rounded-md py-2 disabled:bg-gray-400",children:x?"Generating...":"Generate Referral Code"})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("div",{className:"flex justify-between py-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Referrals:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==v?void 0:null===(e=v[4])||void 0===e?void 0:e.toString())||"0"})]})})]})]})]})})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);